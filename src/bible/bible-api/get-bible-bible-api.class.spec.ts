import { GetBibleBibleApi } from 'src/bible/bible-api/get-bible-bible-api.class';

describe('GetBibleBibleApi', () => {
  const api = new GetBibleBibleApi();

  describe('getPassage() using the actual API', () => {
    it('works for a single chapter', async () => {
      const response = await api.getPassage('1John.1', 'en.WEB');
      expect(response).toBe(
        `<span class="bxVerse"><span class="bxVerseNumber">1</span>&nbsp;That which was from the beginning, that which we have heard, that which we have seen with our eyes, that which we saw, and our hands touched, concerning the Word of life</span><span class="bxVerse"><span class="bxVerseNumber">2</span>&nbsp;(and the life was revealed, and we have seen, and testify, and declare to you the life, the eternal life, which was with the Father, and was revealed to us);</span><span class="bxVerse"><span class="bxVerseNumber">3</span>&nbsp;that which we have seen and heard we declare to you, that you also may have fellowship with us. Yes, and our fellowship is with the Father, and with his Son, Jesus Christ.</span><span class="bxVerse"><span class="bxVerseNumber">4</span>&nbsp;And we write these things to you, that our joy may be fulfilled.</span><span class="bxVerse"><span class="bxVerseNumber">5</span>&nbsp;This is the message which we have heard from him and announce to you, that God is light, and in him is no darkness at all.</span><span class="bxVerse"><span class="bxVerseNumber">6</span>&nbsp;If we say that we have fellowship with him and walk in the darkness, we lie, and don't tell the truth.</span><span class="bxVerse"><span class="bxVerseNumber">7</span>&nbsp;But if we walk in the light, as he is in the light, we have fellowship with one another, and the blood of Jesus Christ, his Son, cleanses us from all sin.</span><span class="bxVerse"><span class="bxVerseNumber">8</span>&nbsp;If we say that we have no sin, we deceive ourselves, and the truth is not in us.</span><span class="bxVerse"><span class="bxVerseNumber">9</span>&nbsp;If we confess our sins, he is faithful and righteous to forgive us the sins, and to cleanse us from all unrighteousness.</span><span class="bxVerse"><span class="bxVerseNumber">10</span>&nbsp;If we say that we haven't sinned, we make him a liar, and his word is not in us.</span>`
      );
    });

    it('works for a chapter-range', async () => {
      const response = await api.getPassage('1John.1-1John.2', 'en.WEB');
      expect(response).toBe(
        `<span class="bxChapter"><span class="bxChapterNumber">1</span><span class="bxVerse"><span class="bxVerseNumber">1</span>&nbsp;That which was from the beginning, that which we have heard, that which we have seen with our eyes, that which we saw, and our hands touched, concerning the Word of life</span><span class="bxVerse"><span class="bxVerseNumber">2</span>&nbsp;(and the life was revealed, and we have seen, and testify, and declare to you the life, the eternal life, which was with the Father, and was revealed to us);</span><span class="bxVerse"><span class="bxVerseNumber">3</span>&nbsp;that which we have seen and heard we declare to you, that you also may have fellowship with us. Yes, and our fellowship is with the Father, and with his Son, Jesus Christ.</span><span class="bxVerse"><span class="bxVerseNumber">4</span>&nbsp;And we write these things to you, that our joy may be fulfilled.</span><span class="bxVerse"><span class="bxVerseNumber">5</span>&nbsp;This is the message which we have heard from him and announce to you, that God is light, and in him is no darkness at all.</span><span class="bxVerse"><span class="bxVerseNumber">6</span>&nbsp;If we say that we have fellowship with him and walk in the darkness, we lie, and don't tell the truth.</span><span class="bxVerse"><span class="bxVerseNumber">7</span>&nbsp;But if we walk in the light, as he is in the light, we have fellowship with one another, and the blood of Jesus Christ, his Son, cleanses us from all sin.</span><span class="bxVerse"><span class="bxVerseNumber">8</span>&nbsp;If we say that we have no sin, we deceive ourselves, and the truth is not in us.</span><span class="bxVerse"><span class="bxVerseNumber">9</span>&nbsp;If we confess our sins, he is faithful and righteous to forgive us the sins, and to cleanse us from all unrighteousness.</span><span class="bxVerse"><span class="bxVerseNumber">10</span>&nbsp;If we say that we haven't sinned, we make him a liar, and his word is not in us.</span></span><span class="bxChapter"><span class="bxChapterNumber">2</span><span class="bxVerse"><span class="bxVerseNumber">1</span>&nbsp;My little children, I write these things to you so that you may not sin. If anyone sins, we have a Counselor with the Father, Jesus Christ, the righteous.</span><span class="bxVerse"><span class="bxVerseNumber">2</span>&nbsp;And he is the atoning sacrifice for our sins, and not for ours only, but also for the whole world.</span><span class="bxVerse"><span class="bxVerseNumber">3</span>&nbsp;This is how we know that we know him: if we keep his commandments.</span><span class="bxVerse"><span class="bxVerseNumber">4</span>&nbsp;One who says, "I know him," and doesn't keep his commandments, is a liar, and the truth isn't in him.</span><span class="bxVerse"><span class="bxVerseNumber">5</span>&nbsp;But whoever keeps his word, God's love has most certainly been perfected in him. This is how we know that we are in him:</span><span class="bxVerse"><span class="bxVerseNumber">6</span>&nbsp;he who says he remains in him ought himself also to walk just like he walked.</span><span class="bxVerse"><span class="bxVerseNumber">7</span>&nbsp;Brothers, I write no new commandment to you, but an old commandment which you had from the beginning. The old commandment is the word which you heard from the beginning.</span><span class="bxVerse"><span class="bxVerseNumber">8</span>&nbsp;Again, I write a new commandment to you, which is true in him and in you; because the darkness is passing away, and the true light already shines.</span><span class="bxVerse"><span class="bxVerseNumber">9</span>&nbsp;He who says he is in the light and hates his brother, is in the darkness even until now.</span><span class="bxVerse"><span class="bxVerseNumber">10</span>&nbsp;He who loves his brother remains in the light, and there is no occasion for stumbling in him.</span><span class="bxVerse"><span class="bxVerseNumber">11</span>&nbsp;But he who hates his brother is in the darkness, and walks in the darkness, and doesn't know where he is going, because the darkness has blinded his eyes.</span><span class="bxVerse"><span class="bxVerseNumber">12</span>&nbsp;I write to you, little children, because your sins are forgiven you for his name's sake.</span><span class="bxVerse"><span class="bxVerseNumber">13</span>&nbsp;I write to you, fathers, because you know him who is from the beginning. I write to you, young men, because you have overcome the evil one. I write to you, little children, because you know the Father.</span><span class="bxVerse"><span class="bxVerseNumber">14</span>&nbsp;I have written to you, fathers, because you know him who is from the beginning. I have written to you, young men, because you are strong, and the word of God remains in you, and you have overcome the evil one.</span><span class="bxVerse"><span class="bxVerseNumber">15</span>&nbsp;Don't love the world, neither the things that are in the world. If anyone loves the world, the Father's love isn't in him.</span><span class="bxVerse"><span class="bxVerseNumber">16</span>&nbsp;For all that is in the world, the lust of the flesh, the lust of the eyes, and the pride of life, isn't the Father's, but is the world's.</span><span class="bxVerse"><span class="bxVerseNumber">17</span>&nbsp;The world is passing away with its lusts, but he who does God's will remains forever.</span><span class="bxVerse"><span class="bxVerseNumber">18</span>&nbsp;Little children, these are the end times, and as you heard that the Antichrist is coming, even now many antichrists have arisen. By this we know that it is the final hour.</span><span class="bxVerse"><span class="bxVerseNumber">19</span>&nbsp;They went out from us, but they didn't belong to us; for if they had belonged to us, they would have continued with us. But they left, that they might be revealed that none of them belong to us.</span><span class="bxVerse"><span class="bxVerseNumber">20</span>&nbsp;You have an anointing from the Holy One, and you all have knowledge.</span><span class="bxVerse"><span class="bxVerseNumber">21</span>&nbsp;I have not written to you because you don't know the truth, but because you know it, and because no lie is of the truth.</span><span class="bxVerse"><span class="bxVerseNumber">22</span>&nbsp;Who is the liar but he who denies that Jesus is the Christ? This is the Antichrist, he who denies the Father and the Son.</span><span class="bxVerse"><span class="bxVerseNumber">23</span>&nbsp;Whoever denies the Son, the same doesn't have the Father. He who confesses the Son has the Father also.</span><span class="bxVerse"><span class="bxVerseNumber">24</span>&nbsp;Therefore, as for you, let that remain in you which you heard from the beginning. If that which you heard from the beginning remains in you, you also will remain in the Son, and in the Father.</span><span class="bxVerse"><span class="bxVerseNumber">25</span>&nbsp;This is the promise which he promised us, the eternal life.</span><span class="bxVerse"><span class="bxVerseNumber">26</span>&nbsp;These things I have written to you concerning those who would lead you astray.</span><span class="bxVerse"><span class="bxVerseNumber">27</span>&nbsp;As for you, the anointing which you received from him remains in you, and you don't need for anyone to teach you. But as his anointing teaches you concerning all things, and is true, and is no lie, and even as it taught you, you will remain in him.</span><span class="bxVerse"><span class="bxVerseNumber">28</span>&nbsp;Now, little children, remain in him, that when he appears, we may have boldness, and not be ashamed before him at his coming.</span><span class="bxVerse"><span class="bxVerseNumber">29</span>&nbsp;If you know that he is righteous, you know that everyone who practices righteousness is born of him.</span></span>`
      );
    });

    it('works for a single verse', async () => {
      const response = await api.getPassage('1John.1.1', 'en.WEB');
      expect(response).toBe(
        `<span class="bxChapter"><span class="bxChapterNumber">1</span><span class="bxVerse"><span class="bxVerseNumber">1</span>&nbsp;That which was from the beginning, that which we have heard, that which we have seen with our eyes, that which we saw, and our hands touched, concerning the Word of life</span></span>`
      );
    });

    it('works for a verse range within a chapter', async () => {
      const response = await api.getPassage('1John.1.1-1John.1.2', 'en.WEB');
      expect(response).toBe(
        `<span class="bxChapter"><span class="bxChapterNumber">1</span><span class="bxVerse"><span class="bxVerseNumber">1</span>&nbsp;That which was from the beginning, that which we have heard, that which we have seen with our eyes, that which we saw, and our hands touched, concerning the Word of life</span><span class="bxVerse"><span class="bxVerseNumber">2</span>&nbsp;(and the life was revealed, and we have seen, and testify, and declare to you the life, the eternal life, which was with the Father, and was revealed to us);</span></span>`
      );
    });

    it('works for a verse range across chapters', async () => {
      const response = await api.getPassage('1John.1.10-1John.2.1', 'en.WEB');
      expect(response).toBe(
        `<span class="bxChapter"><span class="bxChapterNumber">1</span><span class="bxVerse"><span class="bxVerseNumber">10</span>&nbsp;If we say that we haven't sinned, we make him a liar, and his word is not in us.</span></span><span class="bxChapter"><span class="bxChapterNumber">2</span><span class="bxVerse"><span class="bxVerseNumber">1</span>&nbsp;My little children, I write these things to you so that you may not sin. If anyone sins, we have a Counselor with the Father, Jesus Christ, the righteous.</span></span>`
      );
    });

    it('works for a verse range across books', async () => {
      pending('Not yet implemented');
      const response = await api.getPassage('1John.3.1-2John.1.1', 'en.WEB');
      expect(response).toBe('...');
    });
  });
});
